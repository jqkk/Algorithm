## HTTP

HTTP는 웹 브라우저와 웹 서버가 HTML로 작성된 웹 페이지나 동영상, 음성 파일 등을 주고받기 위한 프로토콜이다. 이 프로토콜을 SSL로 암호화하여 보안성을 확보한 것을 가리켜 HTTPS라고 한다

## HTTP 통신

HTTP에서는 클라이언트가 서버에 요청 메시지를 보내고 이에 대해 서버가 응답 메시지를 반환한다. 서버는 응답 메시지를 반환한 후에 초기 상태로 돌아간다. 이때 서버는 클라이언트의 상태를 저장하지 않는다. HTTP에서는 전송 계층 프로토콜로 TCP를 사용하고 네트워크 계층 프로토콜로 IP를 사용하는 것이 일반적이다. 이 두 계층을 합쳐서 TCP/IP라는 이름으로 불린다. TCP/IP에서는 IP 주소를 사용해서 통신할 컴퓨터를 결정한다. 그리고 포트 번호를 사용해서 그 컴퓨터의 어떤 프로그램과 통신할지를 결정한다. HTTP에서는 기본적으로 80번 포트를 사용한다

## HTTP 요청 메시지

HTTP 요청 메시지는 요청 행, 요청 헤더, 메시지 본문이라는 세 부분으로 구성된다

- GET : 웹 서버에 페이지를 요청한다. 요청할 때 필요한 데이터는 URL에 덧붙여 보내며 텍스트 데이터만 전송할 수 있다
- POST : 서버의 데이터를 갱신하거나 보내는 데이터의 양이 많을 때, 비밀번호 등의 개인 정보를 보낼 때 사용한다. 요청할 때 필요한 데이터는 메시지 본문에 담아서 보내며 텍스트 데이터와 바이너리 데이터를 모두 보낼 수 있다

## HTTP 응답 메시지

HTTP 응답 메시지는 응답 행, 응답 헤더, 메시지 본문이라는 세 부분으로 구성된다

## Ajax

Ajax란 XMLHttpRequest라는 자바스크립트의 객체를 이용하여 웹 서버와 비동기로 통신하고 DOM을 이용하여 웹 페이지를 동적으로 갱신하는 프로그래밍 기법을 말한다

## Ajax의 장점

1. 최소한의 데이터 통신만 하므로 처리 속도가 빠르고 서버 부하와 통신 트래픽 부하가 적다
2. 비동기로 통신하므로 클라이언트 측에서 다른 작업을 할 수 있다
3. 웹 페이지 갱신을 클라이언트 측이 담당한다. 페이지를 전환하는 대신 페이지 일부분만 변경하므로 고속 렌더링이 가능하다

## 크로스 오리진 통신

- JSONP
- CORS
- postMessage

## JSONP

JSONP란 'script 요소의 SRC 속성이 가리키는 자바스크립트 파일은 다른 도메인에 위치해도 읽어 들일 수 있다'라는 성질을 활용한 기법이다. JSONP의 마지막인 P인 Padding이라는 단어에는 JSON 데이터에 함수 이름을 추가했다는 뜻이 담겨 있다

1. 외부 서버가 자바스크립트 파일 jsonp.js를 제공하게 만든다. 이 파일에는 JSON 데이터를 show라는 함수의 인수로 지정한 JSONP 데이터가 들어 있다

```javascript
show({
  name: "apple",
  price: 100,
});
```

2. 클라이언트에서는 마우스를 클릭하는 등의 이벤트가 발생했을 때 DOM을 사용해서 script 요소를 생성한다. 이때 script 요소의 src 속성 값으로 외부 서버에 마련해 둔 자바스크립트 파일인 jsonp.js의 주소를 대입한다

3. 외부 서버가 jsonp.js 파일을 클라이언트로 보낸다

4. 클라이언트에 함수 show가 정의되어 있으면 클라이언트가 자바스크립트 파일을 받아서 실행하게 된다

## CORS

XMLHttpRequest Level 1에서는 크로스 오리진 통신이 금지되어 있지만 XMLRequest Level 2부터는 크로스 오리진 통신을 제한적으로 허용한다. 이 사양을 가리켜 CORS라고 한다. 이는 '데이터를 가져오는 대상이 악의적인 웹 사이트라면 읽기와 쓰기를 금지해야 하지만 그 상태를 신뢰할 수 있다면 데이터의 읽기와 쓰기를 허용하자'는 생각에서 출발한 것이다. 서버의 데이터를 다른 웹 사이트에서도 읽을 수 있게 하려면 서버 응답에 Access-Control-Allow-Origin이라는 HTTP헤더를 추가해야 한다

## postMessage

HTML5부터 추가된 Window 객체의 postMessage 메서드를 활용하면 출처가 다른 창끼리 통신할 수 있다. 상호 간의 프로퍼티 참조와 메서드 실행은 불가능하지만 메세지를 비동기적으로 주고받을 수 있다
